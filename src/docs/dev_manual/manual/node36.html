<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">

<!--Converted with jLaTeX2HTML 2002-2-1 (1.70) JA patch-2.0
patched version by:  Kenshi Muto, Debian Project.
* modified by:  Shige TAKENO
LaTeX2HTML 2002-2-1 (1.70),
original version by:  Nikos Drakos, CBLU, University of Leeds
* revised and updated by:  Marcus Hennecke, Ross Moore, Herb Swan
* with significant contributions from:
  Jens Lippmann, Marek Rouchal, Martin Wilck and others -->
<HTML>
<HEAD>
<TITLE>9.2.1 Existing AVS/Express Modules</TITLE>
<META NAME="description" CONTENT="9.2.1 Existing AVS/Express Modules">
<META NAME="keywords" CONTENT="manual">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">

<META NAME="Generator" CONTENT="jLaTeX2HTML v2002-2-1 JA patch-2.0">
<META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css">

<LINK REL="STYLESHEET" HREF="manual.css">

<LINK REL="next" HREF="node37.html">
<LINK REL="previous" HREF="node35.html">
<LINK REL="up" HREF="node35.html">
<LINK REL="next" HREF="node37.html">
</HEAD>

<BODY >
<!--Navigation Panel-->
<A NAME="tex2html719"
  HREF="node37.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next"
 SRC="file:/usr/share/latex2html/icons/next.png"></A> 
<A NAME="tex2html713"
  HREF="node35.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up"
 SRC="file:/usr/share/latex2html/icons/up.png"></A> 
<A NAME="tex2html707"
  HREF="node35.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous"
 SRC="file:/usr/share/latex2html/icons/prev.png"></A> 
<A NAME="tex2html715"
  HREF="node1.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents"
 SRC="file:/usr/share/latex2html/icons/contents.png"></A> 
<A NAME="tex2html717"
  HREF="node92.html">
<IMG WIDTH="43" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="index"
 SRC="file:/usr/share/latex2html/icons/index.png"></A> 
<BR>
<B> Next:</B> <A NAME="tex2html720"
  HREF="node37.html">9.2.2 Writing AVS/Express Modules</A>
<B> Up:</B> <A NAME="tex2html714"
  HREF="node35.html">9.2 AVS/Express</A>
<B> Previous:</B> <A NAME="tex2html708"
  HREF="node35.html">9.2 AVS/Express</A>
 &nbsp; <B>  <A NAME="tex2html716"
  HREF="node1.html">Contents</A></B> 
 &nbsp; <B>  <A NAME="tex2html718"
  HREF="node92.html">Index</A></B> 
<BR>
<BR>
<!--End of Navigation Panel-->

<H2><A NAME="SECTION001021000000000000000"></A>
<A NAME="Existing_AVS_Express_Modules"></A>
<BR>
9.2.1 Existing AVS/Express Modules
</H2>

<P>
There are a number of details relevant to the existing applications that
should be mentioned for the benefit of anyone who might modify the code.  The
first of these is about the structure of the applications.  Each is primarily
split up into three separate macros; one for reading in the data, one for the
user interface, and one for displaying the data.  This seems to be an
effective and logical way to organize the complexity of the networks.  It
should be noted though that the macros for reading the data and displaying it
provide many of the auxiliary user interface panels under the module stack.

<P>
Of the modules in the Library Workspaces, the most useful to
developers of new applications will probably be PF_Grid_from_File,
Load_File_Frame, FileDialog_button, and the modules in the
string functions library.  The PF_Grid_from_File module, which
will be mentioned later, contains some of the other modules in the library,
including the read_parflow module.  The Load_File_Frame module
is the top frame in all of the application user interfaces.  You should be
able to reuse it simply by putting it in your network and connecting it to
the UImod_panel or other UI container.  The FileDialog_button module
is used to easily get a filename string into an application before a ``real''
user interface is built.  It simply displays a window with a button that
pops up a file dialog window when pressed.  The filename is the output of the
module.  The modules in the string functions library provide some
useful string manipulation operations.

<P>
The PF_Grid_from_File module
is the primary module used to read a .pfb or .pfsb file
into an AVS/Express field.  It should work ``out of the box'' and not need
modification in other networks, other than to change the default grid scaling
or downsizing.  The merge_hack and Hack groups in this module
are workarounds for bugs in the downsize module.  Without them, it is
impossible to get a field of type Field_Unif out of either the
downsize or scale_grid modules.  (The Field_Unif type is
needed for input to many of the modules in the applications).

<P>
It should be noted what is happening in the PF_Grid_from_File module
for .pfsb fields, as this is not totally straightforward.  After being
read into a structured field, they are converted to a uniform field of the
original grid size in the sparse_to_unif module.  The ReadPFSB
module has added an orig_dims array variable to the structured field,
so that the sparse_to_unif module knows how big to make the uniform
field.  If the orig_dims array is not present in the structured field,
sparse_to_unif prints a warning and assumes a <!-- MATH
 $10\times10\times10$
 -->
<IMG
 WIDTH="99" HEIGHT="31" ALIGN="MIDDLE" BORDER="0"
 SRC="img204.png"
 ALT="$10\times10\times10$">
grid.  This new uniform field is an input to the Field_Chooser module
which decides whether to output the .pfb or .pfsb field.

<P>
<HR>
<!--Navigation Panel-->
<A NAME="tex2html719"
  HREF="node37.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next"
 SRC="file:/usr/share/latex2html/icons/next.png"></A> 
<A NAME="tex2html713"
  HREF="node35.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up"
 SRC="file:/usr/share/latex2html/icons/up.png"></A> 
<A NAME="tex2html707"
  HREF="node35.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous"
 SRC="file:/usr/share/latex2html/icons/prev.png"></A> 
<A NAME="tex2html715"
  HREF="node1.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents"
 SRC="file:/usr/share/latex2html/icons/contents.png"></A> 
<A NAME="tex2html717"
  HREF="node92.html">
<IMG WIDTH="43" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="index"
 SRC="file:/usr/share/latex2html/icons/index.png"></A> 
<BR>
<B> Next:</B> <A NAME="tex2html720"
  HREF="node37.html">9.2.2 Writing AVS/Express Modules</A>
<B> Up:</B> <A NAME="tex2html714"
  HREF="node35.html">9.2 AVS/Express</A>
<B> Previous:</B> <A NAME="tex2html708"
  HREF="node35.html">9.2 AVS/Express</A>
 &nbsp; <B>  <A NAME="tex2html716"
  HREF="node1.html">Contents</A></B> 
 &nbsp; <B>  <A NAME="tex2html718"
  HREF="node92.html">Index</A></B> 
<!--End of Navigation Panel-->
<ADDRESS>
Steve Smith
2008-06-02
</ADDRESS>
</BODY>
</HTML>
